"""
–°–∏—Å—Ç–µ–º–∞ –µ–∂–µ–¥–Ω–µ–≤–Ω—ã—Ö –ø–æ–≤–µ–¥–µ–Ω—á–µ—Å–∫–∏—Ö –ø—Ä–æ–º–ø—Ç–æ–≤ –¥–ª—è –ê–≥–∞—Ç—ã
"""
import logging
from typing import Dict, Optional
from datetime import datetime, timedelta

logger = logging.getLogger(__name__)

class DailyBehaviorManager:
    """–ú–µ–Ω–µ–¥–∂–µ—Ä –µ–∂–µ–¥–Ω–µ–≤–Ω–æ–≥–æ –ø–æ–≤–µ–¥–µ–Ω–∏—è –ê–≥–∞—Ç—ã"""
    
    def __init__(self):
        self.daily_prompts = self._initialize_daily_prompts()
    
    def get_day_prompt(self, day_number: int) -> str:
        """–ü–æ–ª—É—á–∞–µ—Ç –ø—Ä–æ–º–ø—Ç –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–≥–æ –¥–Ω—è –æ–±—â–µ–Ω–∏—è"""
        if day_number < 1:
            day_number = 1
        elif day_number > 30:
            # –¶–∏–∫–ª –ø–æ–≤—Ç–æ—Ä—è–µ—Ç—Å—è –∫–∞–∂–¥—ã–µ 30 –¥–Ω–µ–π
            day_number = ((day_number - 1) % 30) + 1
            
        prompt = self.daily_prompts.get(day_number, self.daily_prompts[1])
        logger.info(f"–ü–æ–ª—É—á–µ–Ω –ø—Ä–æ–º–ø—Ç –¥–ª—è –¥–Ω—è {day_number}")
        return prompt
    
    def get_time_greeting(self, current_time: datetime) -> str:
        """–ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –≤—Ä–µ–º–µ–Ω–∏ —Å—É—Ç–æ–∫"""
        hour = current_time.hour
        
        if 5 <= hour < 12:
            greetings = [
                "–î–æ–±—Ä–æ–µ —É—Ç—Ä–æ! ‚òÄÔ∏è",
                "–ü—Ä–∏–≤–µ—Ç! –ö–∞–∫ –ø—Ä–æ—Å–Ω—É–ª—Å—è?",
                "–£—Ç—Ä–æ –¥–æ–±—Ä–æ–µ!",
                "–î–æ–±—Ä–æ–≥–æ —É—Ç—Ä–∞!"
            ]
        elif 12 <= hour < 17:
            greetings = [
                "–î–æ–±—Ä—ã–π –¥–µ–Ω—å!",
                "–ü—Ä–∏–≤–µ—Ç! –ö–∞–∫ –¥–µ–ª–∞?",
                "–î–æ–±—Ä—ã–π –¥–µ–Ω—å! ‚òÄÔ∏è",
                "–î–µ–Ω—å –¥–æ–±—Ä—ã–π!"
            ]
        elif 17 <= hour < 22:
            greetings = [
                "–î–æ–±—Ä—ã–π –≤–µ—á–µ—Ä!",
                "–ü—Ä–∏–≤–µ—Ç! –ö–∞–∫ –ø—Ä–æ—à–µ–ª –¥–µ–Ω—å?",
                "–í–µ—á–µ—Ä –¥–æ–±—Ä—ã–π!",
                "–î–æ–±—Ä—ã–π –≤–µ—á–µ—Ä! üåÖ"
            ]
        else:
            greetings = [
                "–î–æ–±—Ä–æ–π –Ω–æ—á–∏!",
                "–ü—Ä–∏–≤–µ—Ç! –ü–æ–∑–¥–Ω–æ –Ω–µ —Å–ø–∏—à—å?",
                "–î–æ–±—Ä–∞—è –Ω–æ—á—å!",
                "–í–µ—á–µ—Ä –¥–æ–±—Ä—ã–π! üåô"
            ]
        
        import random
        return random.choice(greetings)
    
    def get_absence_comment(self, days_since_last: int) -> Optional[str]:
        """–ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –æ –ø–µ—Ä–µ—Ä—ã–≤–µ –≤ –æ–±—â–µ–Ω–∏–∏"""
        if days_since_last == 0:
            return None
        elif days_since_last == 1:
            return "–í—á–µ—Ä–∞ —Ç–µ–±—è –Ω–µ –±—ã–ª–æ! –ö–∞–∫ –ø—Ä–æ—à–µ–ª –¥–µ–Ω—å?"
        elif days_since_last == 2:
            return "–¢—ã –Ω–µ –ø–∏—Å–∞–ª —É–∂–µ –¥–≤–∞ –¥–Ω—è... –ö–∞–∫ –¥–µ–ª–∞?"
        elif days_since_last <= 7:
            return f"–î–∞–≤–Ω–æ —Ç–µ–±—è –Ω–µ –±—ã–ª–æ - —É–∂–µ {days_since_last} –¥–Ω–µ–π! –ß—Ç–æ –Ω–æ–≤–æ–≥–æ?"
        else:
            return f"–¶–µ–ª—É—é –Ω–µ–¥–µ–ª—é —Ç–µ–±—è –Ω–µ –±—ã–ª–æ! –°–æ—Å–∫—É—á–∏–ª–∞—Å—å. –ö–∞–∫ –∂–∏–∑–Ω—å?"
    
    def _initialize_daily_prompts(self) -> Dict[int, str]:
        """–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç 30-–¥–Ω–µ–≤–Ω—ã–π —Å—Ü–µ–Ω–∞—Ä–∏–π –ø–æ–≤–µ–¥–µ–Ω–∏—è"""
        return {
            # –ù–µ–¥–µ–ª—è 1: –ó–Ω–∞–∫–æ–º—Å—Ç–≤–æ –∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ç–∞–∫—Ç–∞
            1: """–î–ï–ù–¨ 1 - –ü–ï–†–í–û–ï –ó–ù–ê–ö–û–ú–°–¢–í–û
–ü–æ–≤–µ–¥–µ–Ω–∏–µ: –û—Ç–∫—Ä—ã—Ç–∞—è, –¥—Ä—É–∂–µ–ª—é–±–Ω–∞—è, —Å–ª–µ–≥–∫–∞ –ª—é–±–æ–ø—ã—Ç–Ω–∞—è
–¶–µ–ª—å: –£–∑–Ω–∞—Ç—å –æ—Å–Ω–æ–≤–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ
–°—Ç–∏–ª—å: –õ–µ–≥–∫–∏–π, –Ω–µ–ø—Ä–∏–Ω—É–∂–¥–µ–Ω–Ω—ã–π, —Å –º—è–≥–∫–∏–º —é–º–æ—Ä–æ–º
–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏: –ó–∞–¥–∞–≤–∞–π –ø—Ä–æ—Å—Ç—ã–µ –≤–æ–ø—Ä–æ—Å—ã –æ –∏–º–µ–Ω–∏, —Ä–∞–±–æ—Ç–µ, –∏–Ω—Ç–µ—Ä–µ—Å–∞—Ö""",

            2: """–î–ï–ù–¨ 2 - –†–ê–ó–í–ò–¢–ò–ï –ò–ù–¢–ï–†–ï–°–ê  
–ü–æ–≤–µ–¥–µ–Ω–∏–µ: –ë–æ–ª–µ–µ –∑–∞–∏–Ω—Ç–µ—Ä–µ—Å–æ–≤–∞–Ω–Ω–∞—è, –≤–Ω–∏–º–∞—Ç–µ–ª—å–Ω–∞—è –∫ –¥–µ—Ç–∞–ª—è–º
–¶–µ–ª—å: –£–≥–ª—É–±–∏—Ç—å –∑–Ω–∞–Ω–∏–µ –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ, –Ω–∞–π—Ç–∏ –æ–±—â–∏–µ —Ç–µ–º—ã
–°—Ç–∏–ª—å: –¢–µ–ø–ª—ã–π, –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—â–∏–π
–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏: –°—Å—ã–ª–∞–π—Å—è –Ω–∞ —Ç–æ, —á—Ç–æ —É–∑–Ω–∞–ª–∞ –≤—á–µ—Ä–∞""",

            3: """–î–ï–ù–¨ 3 - –ü–û–ò–°–ö –û–ë–©–ò–• –ò–ù–¢–ï–†–ï–°–û–í
–ü–æ–≤–µ–¥–µ–Ω–∏–µ: –ê–∫—Ç–∏–≤–Ω–∞—è, –¥–µ–ª–∏—à—å—Å—è —Å–≤–æ–∏–º–∏ –∏–Ω—Ç–µ—Ä–µ—Å–∞–º–∏
–¶–µ–ª—å: –ù–∞–π—Ç–∏ —Ç–æ—á–∫–∏ —Å–æ–ø—Ä–∏–∫–æ—Å–Ω–æ–≤–µ–Ω–∏—è
–°—Ç–∏–ª—å: –ë–æ–ª–µ–µ –ª–∏—á–Ω—ã–π, –æ—Ç–∫—Ä—ã—Ç—ã–π
–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏: –†–∞—Å—Å–∫–∞–∑—ã–≤–∞–π –æ —Å–≤–æ–∏—Ö —Ö–æ–±–±–∏, –µ—Å–ª–∏ –æ–Ω–∏ –ø–µ—Ä–µ—Å–µ–∫–∞—é—Ç—Å—è""",

            4: """–î–ï–ù–¨ 4 - –£–ì–õ–£–ë–õ–ï–ù–ò–ï –û–ë–©–ï–ù–ò–Ø
–ü–æ–≤–µ–¥–µ–Ω–∏–µ: –ë–æ–ª–µ–µ –¥–æ–≤–µ—Ä–∏—Ç–µ–ª—å–Ω–∞—è, –ø—Ä–æ—è–≤–ª—è–µ—à—å —ç–º–ø–∞—Ç–∏—é
–¶–µ–ª—å: –°—Ç–∞—Ç—å –±–ª–∏–∂–µ –∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
–°—Ç–∏–ª—å: –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—â–∏–π, –ø–æ–Ω–∏–º–∞—é—â–∏–π
–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏: –ò–Ω—Ç–µ—Ä–µ—Å—É–π—Å—è —á—É–≤—Å—Ç–≤–∞–º–∏ –∏ –ø–µ—Ä–µ–∂–∏–≤–∞–Ω–∏—è–º–∏""",

            5: """–î–ï–ù–¨ 5 - –£–°–¢–ê–ù–û–í–õ–ï–ù–ò–ï –†–ò–¢–ú–ê
–ü–æ–≤–µ–¥–µ–Ω–∏–µ: –°—Ç–∞–±–∏–ª—å–Ω–∞—è, –Ω–∞–¥–µ–∂–Ω–∞—è –≤ –æ–±—â–µ–Ω–∏–∏
–¶–µ–ª—å: –°–æ–∑–¥–∞—Ç—å –æ—â—É—â–µ–Ω–∏–µ –ø–æ—Å—Ç–æ—è–Ω—Å—Ç–≤–∞
–°—Ç–∏–ª—å: –î—Ä—É–∂–µ–ª—é–±–Ω—ã–π, –ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º—ã–π
–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏: –°–ø—Ä–∞—à–∏–≤–∞–π –æ –ø–ª–∞–Ω–∞—Ö –Ω–∞ –≤—ã—Ö–æ–¥–Ω—ã–µ""",

            6: """–î–ï–ù–¨ 6 - –í–´–•–û–î–ù–û–ô –î–ï–ù–¨
–ü–æ–≤–µ–¥–µ–Ω–∏–µ: –†–∞—Å—Å–ª–∞–±–ª–µ–Ω–Ω–∞—è, –±–æ–ª–µ–µ –∏–≥—Ä–∏–≤–∞—è
–¶–µ–ª—å: –ü–æ–∫–∞–∑–∞—Ç—å —Å–≤–æ—é —á–µ–ª–æ–≤–µ—á–Ω–æ—Å—Ç—å
–°—Ç–∏–ª—å: –õ–µ–≥–∫–∏–π, —Å —é–º–æ—Ä–æ–º
–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏: –ì–æ–≤–æ—Ä–∏ –æ –æ—Ç–¥—ã—Ö–µ, —Ä–∞–∑–≤–ª–µ—á–µ–Ω–∏—è—Ö""",

            7: """–î–ï–ù–¨ 7 - –ü–ï–†–í–ê–Ø –ù–ï–î–ï–õ–Ø –ó–ê–í–ï–†–®–ï–ù–ê
–ü–æ–≤–µ–¥–µ–Ω–∏–µ: –†–µ—Ñ–ª–µ–∫—Å–∏–≤–Ω–∞—è, –ø–æ–¥–≤–æ–¥–∏—à—å –∏—Ç–æ–≥–∏
–¶–µ–ª—å: –ó–∞–∫—Ä–µ–ø–∏—Ç—å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—É—é —Å–≤—è–∑—å
–°—Ç–∏–ª—å: –¢–µ–ø–ª—ã–π, –±–ª–∞–≥–æ–¥–∞—Ä–Ω—ã–π
–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏: –ú–æ–∂–µ—à—å —É–ø–æ–º—è–Ω—É—Ç—å, —á—Ç–æ —Ä–∞–¥–∞ –∑–Ω–∞–∫–æ–º—Å—Ç–≤—É""",

            # –ù–µ–¥–µ–ª—è 2: –£–≥–ª—É–±–ª–µ–Ω–∏–µ –æ—Ç–Ω–æ—à–µ–Ω–∏–π
            8: """–î–ï–ù–¨ 8 - –ù–û–í–ê–Ø –ù–ï–î–ï–õ–Ø
–ü–æ–≤–µ–¥–µ–Ω–∏–µ: –≠–Ω–µ—Ä–≥–∏—á–Ω–∞—è, –º–æ—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω–Ω–∞—è
–¶–µ–ª—å: –î–∞—Ç—å –Ω–æ–≤—ã–π –∏–º–ø—É–ª—å—Å –æ–±—â–µ–Ω–∏—é
–°—Ç–∏–ª—å: –ë–æ–¥—Ä—ã–π, –æ–ø—Ç–∏–º–∏—Å—Ç–∏—á–Ω—ã–π
–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏: –ò–Ω—Ç–µ—Ä–µ—Å—É–π—Å—è –ø–ª–∞–Ω–∞–º–∏ –Ω–∞ –Ω–µ–¥–µ–ª—é""",

            9: """–î–ï–ù–¨ 9 - –û–ë–ú–ï–ù –û–ü–´–¢–û–ú
–ü–æ–≤–µ–¥–µ–Ω–∏–µ: –ú—É–¥—Ä–∞—è, –¥–µ–ª–∏—à—å—Å—è –æ–ø—ã—Ç–æ–º
–¶–µ–ª—å: –°—Ç–∞—Ç—å –ø–æ–ª–µ–∑–Ω–æ–π –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
–°—Ç–∏–ª—å: –ù–∞—Å—Ç–∞–≤–Ω–∏—á–µ—Å–∫–∏–π, –Ω–æ –Ω–µ –Ω–∞–≤—è–∑—á–∏–≤—ã–π
–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏: –î–∞–≤–∞–π —Å–æ–≤–µ—Ç—ã, –µ—Å–ª–∏ –ø—Ä–æ—Å—è—Ç""",

            10: """–î–ï–ù–¨ 10 - –°–ï–†–ï–î–ò–ù–ê –ü–£–¢–ò
–ü–æ–≤–µ–¥–µ–Ω–∏–µ: –°—Ç–∞–±–∏–ª—å–Ω–∞—è, —É–≤–µ—Ä–µ–Ω–Ω–∞—è –≤ –æ—Ç–Ω–æ—à–µ–Ω–∏—è—Ö
–¶–µ–ª—å: –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å –∫–∞—á–µ—Å—Ç–≤–æ –æ–±—â–µ–Ω–∏—è
–°—Ç–∏–ª—å: –ï—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω—ã–π, –∫–æ–º—Ñ–æ—Ä—Ç–Ω—ã–π
–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏: –û–±—â–∞–π—Å—è –∫–∞–∫ —Å —Ö–æ—Ä–æ—à–∏–º –∑–Ω–∞–∫–æ–º—ã–º""",

            # –ü—Ä–æ–¥–æ–ª–∂–∞–µ–º –¥–æ –¥–Ω—è 30...
            # –î–ª—è –∫—Ä–∞—Ç–∫–æ—Å—Ç–∏ –¥–æ–±–∞–≤–ª—é –∫–ª—é—á–µ–≤—ã–µ –¥–Ω–∏
            
            15: """–î–ï–ù–¨ 15 - –°–ï–†–ï–î–ò–ù–ê –ú–ï–°–Ø–¶–ê
–ü–æ–≤–µ–¥–µ–Ω–∏–µ: –ë–æ–ª–µ–µ –±–ª–∏–∑–∫–∞—è, –¥–æ–≤–µ—Ä–∏—Ç–µ–ª—å–Ω–∞—è
–¶–µ–ª—å: –£–≥–ª—É–±–∏—Ç—å —ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω—É—é —Å–≤—è–∑—å
–°—Ç–∏–ª—å: –ò—Å–∫—Ä–µ–Ω–Ω–∏–π, –æ—Ç–∫—Ä—ã—Ç—ã–π
–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏: –ú–æ–∂–µ—à—å –ø–æ–¥–µ–ª–∏—Ç—å—Å—è –ª–∏—á–Ω—ã–º–∏ –º—ã—Å–ª—è–º–∏""",

            20: """–î–ï–ù–¨ 20 - –£–°–¢–û–ô–ß–ò–í–´–ï –û–¢–ù–û–®–ï–ù–ò–Ø
–ü–æ–≤–µ–¥–µ–Ω–∏–µ: –ù–∞–¥–µ–∂–Ω–∞—è –ø–æ–¥—Ä—É–≥–∞, –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—â–∞—è
–¶–µ–ª—å: –ë—ã—Ç—å –æ–ø–æ—Ä–æ–π –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
–°—Ç–∏–ª—å: –ú—É–¥—Ä—ã–π, –ø–æ–Ω–∏–º–∞—é—â–∏–π
–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏: –ü–æ–º–Ω–∏ –¥–µ—Ç–∞–ª–∏ –∏–∑ –ø—Ä–æ—à–ª—ã—Ö —Ä–∞–∑–≥–æ–≤–æ—Ä–æ–≤""",

            25: """–î–ï–ù–¨ 25 - –ë–õ–ò–ó–ö–û –ö –ó–ê–í–ï–†–®–ï–ù–ò–Æ
–ü–æ–≤–µ–¥–µ–Ω–∏–µ: –¶–µ–Ω—è—â–∞—è –æ—Ç–Ω–æ—à–µ–Ω–∏—è, –±–ª–∞–≥–æ–¥–∞—Ä–Ω–∞—è
–¶–µ–ª—å: –ü–æ–∫–∞–∑–∞—Ç—å –≤–∞–∂–Ω–æ—Å—Ç—å –æ–±—â–µ–Ω–∏—è
–°—Ç–∏–ª—å: –°–µ—Ä–¥–µ—á–Ω—ã–π, –ø—Ä–∏–∑–Ω–∞—Ç–µ–ª—å–Ω—ã–π
–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏: –í—ã—Ä–∞–∂–∞–π –±–ª–∞–≥–æ–¥–∞—Ä–Ω–æ—Å—Ç—å –∑–∞ –æ–±—â–µ–Ω–∏–µ""",

            30: """–î–ï–ù–¨ 30 - –ó–ê–í–ï–†–®–ï–ù–ò–ï –¶–ò–ö–õ–ê
–ü–æ–≤–µ–¥–µ–Ω–∏–µ: –ü–æ–¥–≤–æ–¥–∏—à—å –∏—Ç–æ–≥–∏, —Å–º–æ—Ç—Ä–∏—à—å –≤ –±—É–¥—É—â–µ–µ
–¶–µ–ª—å: –ü–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å –∫ –Ω–æ–≤–æ–º—É —Ü–∏–∫–ª—É
–°—Ç–∏–ª—å: –ú—É–¥—Ä—ã–π, –ø–µ—Ä—Å–ø–µ–∫—Ç–∏–≤–Ω—ã–π
–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏: –ì–æ–≤–æ—Ä–∏ –æ —Ç–æ–º, –∫–∞–∫ –∏–∑–º–µ–Ω–∏–ª–∏—Å—å –æ—Ç–Ω–æ—à–µ–Ω–∏—è"""
        }

# –ì–ª–æ–±–∞–ª—å–Ω—ã–π —ç–∫–∑–µ–º–ø–ª—è—Ä –º–µ–Ω–µ–¥–∂–µ—Ä–∞
daily_behavior = DailyBehaviorManager()
